{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/flow/workflow-core/apps/web/src/lib/env.ts"],"sourcesContent":["export const env = {\n  mongodbUri: process.env.MONGODB_URI || \"mongodb://localhost:27017/workforce\",\n  accessSecret: process.env.JWT_ACCESS_SECRET || \"dev-access-secret-change-me\",\n  refreshSecret: process.env.JWT_REFRESH_SECRET || \"dev-refresh-secret-change-me\",\n  accessTokenTtlMinutes: Number(process.env.ACCESS_TOKEN_TTL_MINUTES || \"15\"),\n  refreshTokenTtlDays: Number(process.env.REFRESH_TOKEN_TTL_DAYS || \"30\"),\n  geoFallbackCountry: process.env.GEOIP_FALLBACK_COUNTRY || \"Unknown\",\n  /** 32-byte hex key for AES-GCM embedding encryption. Generate: openssl rand -hex 32 */\n  faceEmbeddingKey: process.env.FACE_EMBEDDING_KEY || \"0000000000000000000000000000000000000000000000000000000000000000\",\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,MAAM;IACjB,YAAY,QAAQ,GAAG,CAAC,WAAW,IAAI;IACvC,cAAc,QAAQ,GAAG,CAAC,iBAAiB,IAAI;IAC/C,eAAe,QAAQ,GAAG,CAAC,kBAAkB,IAAI;IACjD,uBAAuB,OAAO,QAAQ,GAAG,CAAC,wBAAwB,IAAI;IACtE,qBAAqB,OAAO,QAAQ,GAAG,CAAC,sBAAsB,IAAI;IAClE,oBAAoB,QAAQ,GAAG,CAAC,sBAAsB,IAAI;IAC1D,qFAAqF,GACrF,kBAAkB,QAAQ,GAAG,CAAC,kBAAkB,IAAI;AACtD"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/flow/workflow-core/apps/web/src/lib/mongodb.ts"],"sourcesContent":["import mongoose from \"mongoose\";\nimport { env } from \"@/src/lib/env\";\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var mongooseConn: Promise<typeof mongoose> | undefined;\n}\n\nexport function connectMongo() {\n  if (!global.mongooseConn) {\n    global.mongooseConn = mongoose.connect(env.mongodbUri, { dbName: \"workforce\" });\n  }\n  return global.mongooseConn;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAOO,SAAS;IACd,IAAI,CAAC,OAAO,YAAY,EAAE;QACxB,OAAO,YAAY,GAAG,mKAAQ,CAAC,OAAO,CAAC,yIAAG,CAAC,UAAU,EAAE;YAAE,QAAQ;QAAY;IAC/E;IACA,OAAO,OAAO,YAAY;AAC5B"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/flow/workflow-core/apps/web/src/db/models.ts"],"sourcesContent":["import mongoose, { Schema, type InferSchemaType } from \"mongoose\";\n\nconst userSchema = new Schema(\n  {\n    email: { type: String, unique: true, required: true, lowercase: true, trim: true },\n    passwordHash: { type: String, required: true },\n    roleIds: [{ type: Schema.Types.ObjectId, ref: \"Role\" }],\n    isActive: { type: Boolean, default: true },\n    profile: {\n      displayName: { type: String, default: \"\" },\n      profilePictureBase64: { type: String, default: \"\" },\n      employeeCode: { type: String, default: \"\" },\n      firstName: { type: String, default: \"\" },\n      lastName: { type: String, default: \"\" },\n      nationality: { type: String, default: \"\" },\n      dateOfBirth: { type: Date, default: null },\n      gender: { type: String, default: \"\" },\n      maritalStatus: { type: String, default: \"\" },\n      jobTitle: { type: String, default: \"\" },\n      department: { type: String, default: \"\" },\n      manager: { type: String, default: \"\" },\n      phone: { type: String, default: \"\" },\n      timezone: { type: String, default: \"\" },\n      skills: [{ type: String }],\n      education: { type: String, default: \"\" },\n      languages: [{ type: String }],\n      dependents: [{ type: String }],\n      contacts: [{ type: String }],\n    },\n  },\n  { timestamps: true },\n);\n\nconst roleSchema = new Schema(\n  {\n    name: { type: String, unique: true, required: true, trim: true },\n    description: { type: String, default: \"\" },\n    permissions: [{ type: String, required: true }],\n  },\n  { timestamps: true },\n);\n\nconst refreshTokenSchema = new Schema(\n  {\n    userId: { type: Schema.Types.ObjectId, ref: \"User\", required: true, index: true },\n    tokenHash: { type: String, required: true, unique: true },\n    expiresAt: { type: Date, required: true, index: true },\n    revokedAt: { type: Date, default: null },\n  },\n  { timestamps: true },\n);\n\nconst deviceSchema = new Schema(\n  {\n    userId: { type: Schema.Types.ObjectId, ref: \"User\", required: true, index: true },\n    hostname: { type: String, required: true },\n    osVersion: { type: String, default: \"\" },\n    deviceFingerprint: { type: String, required: true, index: true },\n    appVersion: { type: String, default: \"\" },\n  },\n  { timestamps: true },\n);\n\nconst faceTemplateSchema = new Schema(\n  {\n    userId: { type: Schema.Types.ObjectId, ref: \"User\", required: true, unique: true },\n    /** Encrypted embeddings per pose (AES-GCM). front, left, right. */\n    embeddingFront: { type: String, default: null },\n    embeddingLeft: { type: String, default: null },\n    embeddingRight: { type: String, default: null },\n    /** Model version for embedding compatibility. */\n    modelVersion: { type: Number, default: 1 },\n    status: { type: String, default: \"active\" },\n    /** @deprecated legacy single embedding - migrate to embeddingFront/Left/Right */\n    embeddingVector: [{ type: Number }],\n    version: { type: Number, default: 1 },\n  },\n  { timestamps: true },\n);\n\nconst attendanceEventSchema = new Schema(\n  {\n    userId: { type: Schema.Types.ObjectId, ref: \"User\", required: true, index: true },\n    type: { type: String, enum: [\"clockIn\", \"clockOut\"], required: true },\n    timestamp: { type: Date, required: true, index: true },\n    ip: { type: String, default: \"\" },\n    geo: {\n      country: { type: String, default: \"\" },\n      city: { type: String, default: \"\" },\n      ll: [{ type: Number }],\n    },\n    deviceId: { type: Schema.Types.ObjectId, ref: \"Device\" },\n    faceScore: { type: Number, default: 0 },\n    verificationStatus: { type: String, default: \"pending\" },\n  },\n  { timestamps: true },\n);\n\nconst workSessionSchema = new Schema(\n  {\n    userId: { type: Schema.Types.ObjectId, ref: \"User\", required: true, index: true },\n    clockInAt: { type: Date, required: true, index: true },\n    clockOutAt: { type: Date, default: null, index: true },\n    totalSeconds: { type: Number, default: 0 },\n    ipAtIn: { type: String, default: \"\" },\n    ipAtOut: { type: String, default: \"\" },\n    deviceIdAtIn: { type: Schema.Types.ObjectId, ref: \"Device\" },\n    deviceIdAtOut: { type: Schema.Types.ObjectId, ref: \"Device\" },\n  },\n  { timestamps: true },\n);\n\nconst auditLogSchema = new Schema(\n  {\n    actorUserId: { type: Schema.Types.ObjectId, ref: \"User\" },\n    action: { type: String, required: true },\n    details: { type: Schema.Types.Mixed, default: {} },\n  },\n  { timestamps: true },\n);\n\nconst awayAlertSchema = new Schema(\n  {\n    userId: { type: Schema.Types.ObjectId, ref: \"User\", required: true, index: true },\n    employeeEmail: { type: String, required: true },\n    awayAt: { type: Date, required: true, default: () => new Date() },\n    minutesAway: { type: Number, required: true, default: 15 },\n  },\n  { timestamps: true },\n);\n\nconst companyStructureSchema = new Schema(\n  {\n    name: { type: String, required: true, trim: true },\n    address: { type: String, default: \"\" },\n    type: { type: String, default: \"Department\" },\n    country: { type: String, default: \"\" },\n    timeZone: { type: String, default: \"\" },\n    parentStructure: { type: String, default: \"\" },\n  },\n  { timestamps: true },\n);\n\nconst loginHistorySchema = new Schema(\n  {\n    userId: { type: Schema.Types.ObjectId, ref: \"User\", required: true, index: true },\n    loginTime: { type: Date, required: true },\n    loginTimeFormatted: { type: String, required: true },\n    ipAddress: { type: String, default: \"\" },\n    systemName: { type: String, default: \"\" },\n    location: { type: String, default: \"\" },\n  },\n  { timestamps: true },\n);\n\nexport type UserDoc = InferSchemaType<typeof userSchema>;\nexport type RoleDoc = InferSchemaType<typeof roleSchema>;\n\nexport const User = mongoose.models.User || mongoose.model(\"User\", userSchema);\nexport const Role = mongoose.models.Role || mongoose.model(\"Role\", roleSchema);\nexport const RefreshToken =\n  mongoose.models.RefreshToken || mongoose.model(\"RefreshToken\", refreshTokenSchema);\nexport const Device = mongoose.models.Device || mongoose.model(\"Device\", deviceSchema);\nexport const FaceTemplate =\n  mongoose.models.FaceTemplate || mongoose.model(\"FaceTemplate\", faceTemplateSchema);\nexport const AttendanceEvent =\n  mongoose.models.AttendanceEvent || mongoose.model(\"AttendanceEvent\", attendanceEventSchema);\nexport const WorkSession =\n  mongoose.models.WorkSession || mongoose.model(\"WorkSession\", workSessionSchema);\nexport const AuditLog = mongoose.models.AuditLog || mongoose.model(\"AuditLog\", auditLogSchema);\nexport const CompanyStructure =\n  mongoose.models.CompanyStructure || mongoose.model(\"CompanyStructure\", companyStructureSchema);\nexport const AwayAlert =\n  mongoose.models.AwayAlert || mongoose.model(\"AwayAlert\", awayAlertSchema);\nexport const LoginHistory =\n  mongoose.models.LoginHistory || mongoose.model(\"LoginHistory\", loginHistorySchema);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 534, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/flow/workflow-core/apps/web/src/lib/password.ts"],"sourcesContent":["import argon2 from \"argon2\";\n\nexport async function hashPassword(password: string) {\n  return argon2.hash(password, { type: argon2.argon2id });\n}\n\nexport async function verifyPassword(hash: string, password: string) {\n  return argon2.verify(hash, password);\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,eAAe,aAAa,QAAgB;IACjD,OAAO,6JAAM,CAAC,IAAI,CAAC,UAAU;QAAE,MAAM,6JAAM,CAAC,QAAQ;IAAC;AACvD;AAEO,eAAe,eAAe,IAAY,EAAE,QAAgB;IACjE,OAAO,6JAAM,CAAC,MAAM,CAAC,MAAM;AAC7B"}},
    {"offset": {"line": 554, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/flow/workflow-core/apps/web/src/lib/bootstrap.ts"],"sourcesContent":["import { Role, User } from \"@/src/db/models\";\nimport { hashPassword } from \"@/src/lib/password\";\n\nlet seeded = false;\n\nexport async function ensureBootstrap() {\n  if (seeded) {\n    return;\n  }\n\n  const requiredPermissions = [\n    \"roles:create\",\n    \"roles:read\",\n    \"roles:update\",\n    \"roles:delete\",\n    \"users:create\",\n    \"users:read\",\n    \"users:update\",\n    \"attendance:read\",\n    \"attendance:correct\",\n    \"face:enroll\",\n    \"company_structure:create\",\n    \"company_structure:read\",\n    \"company_structure:update\",\n    \"company_structure:delete\",\n    \"dashboard:read\",\n  ];\n\n  let adminRole = await Role.findOne({ name: \"admin\" });\n  if (!adminRole) {\n    adminRole = await Role.create({\n      name: \"admin\",\n      description: \"System administrator\",\n      permissions: requiredPermissions,\n    });\n  } else {\n    const merged = Array.from(new Set([...(adminRole.permissions || []), ...requiredPermissions]));\n    if (merged.length !== adminRole.permissions.length) {\n      adminRole.permissions = merged;\n      await adminRole.save();\n    }\n  }\n\n  const adminEmail = \"admin@euroasianngroup.com\";\n  const adminExists = await User.findOne({ email: adminEmail });\n  if (!adminExists) {\n    await User.create({\n      email: adminEmail,\n      passwordHash: await hashPassword(\"Admin123!\"),\n      roleIds: [adminRole._id],\n      isActive: true,\n      profile: { displayName: \"Admin\", employeeCode: \"ADMIN001\" },\n    });\n  }\n\n  let employeeRole = await Role.findOne({ name: \"employee\" });\n  if (!employeeRole) {\n    employeeRole = await Role.create({\n      name: \"employee\",\n      description: \"Regular employee\",\n      permissions: [\"attendance:read\", \"dashboard:read\"],\n    });\n  }\n\n  const employeeEmail = \"lalithyachavala@euroasianngroup.com\";\n  const employeeExists = await User.findOne({ email: employeeEmail });\n  if (!employeeExists) {\n    await User.create({\n      email: employeeEmail,\n      passwordHash: await hashPassword(\"lalithya\"),\n      roleIds: [employeeRole._id],\n      isActive: true,\n      profile: { displayName: \"Lalithya Chavala\", employeeCode: \"EMP001\" },\n    });\n  }\n\n  seeded = true;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,IAAI,SAAS;AAEN,eAAe;IACpB,IAAI,QAAQ;QACV;IACF;IAEA,MAAM,sBAAsB;QAC1B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,IAAI,YAAY,MAAM,4IAAI,CAAC,OAAO,CAAC;QAAE,MAAM;IAAQ;IACnD,IAAI,CAAC,WAAW;QACd,YAAY,MAAM,4IAAI,CAAC,MAAM,CAAC;YAC5B,MAAM;YACN,aAAa;YACb,aAAa;QACf;IACF,OAAO;QACL,MAAM,SAAS,MAAM,IAAI,CAAC,IAAI,IAAI;eAAK,UAAU,WAAW,IAAI,EAAE;eAAM;SAAoB;QAC5F,IAAI,OAAO,MAAM,KAAK,UAAU,WAAW,CAAC,MAAM,EAAE;YAClD,UAAU,WAAW,GAAG;YACxB,MAAM,UAAU,IAAI;QACtB;IACF;IAEA,MAAM,aAAa;IACnB,MAAM,cAAc,MAAM,4IAAI,CAAC,OAAO,CAAC;QAAE,OAAO;IAAW;IAC3D,IAAI,CAAC,aAAa;QAChB,MAAM,4IAAI,CAAC,MAAM,CAAC;YAChB,OAAO;YACP,cAAc,MAAM,IAAA,uJAAY,EAAC;YACjC,SAAS;gBAAC,UAAU,GAAG;aAAC;YACxB,UAAU;YACV,SAAS;gBAAE,aAAa;gBAAS,cAAc;YAAW;QAC5D;IACF;IAEA,IAAI,eAAe,MAAM,4IAAI,CAAC,OAAO,CAAC;QAAE,MAAM;IAAW;IACzD,IAAI,CAAC,cAAc;QACjB,eAAe,MAAM,4IAAI,CAAC,MAAM,CAAC;YAC/B,MAAM;YACN,aAAa;YACb,aAAa;gBAAC;gBAAmB;aAAiB;QACpD;IACF;IAEA,MAAM,gBAAgB;IACtB,MAAM,iBAAiB,MAAM,4IAAI,CAAC,OAAO,CAAC;QAAE,OAAO;IAAc;IACjE,IAAI,CAAC,gBAAgB;QACnB,MAAM,4IAAI,CAAC,MAAM,CAAC;YAChB,OAAO;YACP,cAAc,MAAM,IAAA,uJAAY,EAAC;YACjC,SAAS;gBAAC,aAAa,GAAG;aAAC;YAC3B,UAAU;YACV,SAAS;gBAAE,aAAa;gBAAoB,cAAc;YAAS;QACrE;IACF;IAEA,SAAS;AACX"}},
    {"offset": {"line": 682, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/flow/workflow-core/apps/web/src/lib/tokens.ts"],"sourcesContent":["import crypto from \"crypto\";\nimport { SignJWT, jwtVerify } from \"jose\";\nimport { env } from \"@/src/lib/env\";\nimport { RefreshToken } from \"@/src/db/models\";\n\nconst accessSecret = new TextEncoder().encode(env.accessSecret);\nconst refreshSecret = new TextEncoder().encode(env.refreshSecret);\n\nexport type AccessTokenPayload = {\n  sub: string;\n  email: string;\n  roles: string[];\n};\n\nexport async function createAccessToken(payload: AccessTokenPayload) {\n  return new SignJWT(payload)\n    .setProtectedHeader({ alg: \"HS256\" })\n    .setIssuedAt()\n    .setExpirationTime(`${env.accessTokenTtlMinutes}m`)\n    .sign(accessSecret);\n}\n\nexport async function createRefreshToken(userId: string) {\n  const rawToken = crypto.randomUUID();\n  const tokenHash = crypto.createHash(\"sha256\").update(rawToken).digest(\"hex\");\n  const expiresAt = new Date(Date.now() + env.refreshTokenTtlDays * 24 * 60 * 60 * 1000);\n\n  await RefreshToken.create({ userId, tokenHash, expiresAt });\n  return rawToken;\n}\n\nexport async function verifyAccessToken(token: string) {\n  const { payload } = await jwtVerify(token, accessSecret);\n  return payload as unknown as AccessTokenPayload;\n}\n\nexport async function rotateRefreshToken(userId: string, incomingToken: string) {\n  const incomingHash = crypto.createHash(\"sha256\").update(incomingToken).digest(\"hex\");\n  const existing = await RefreshToken.findOne({ userId, tokenHash: incomingHash, revokedAt: null });\n  if (!existing || existing.expiresAt < new Date()) {\n    return null;\n  }\n\n  existing.revokedAt = new Date();\n  await existing.save();\n  return createRefreshToken(userId);\n}\n\nexport async function revokeRefreshToken(token: string) {\n  const tokenHash = crypto.createHash(\"sha256\").update(token).digest(\"hex\");\n  await RefreshToken.updateOne({ tokenHash, revokedAt: null }, { $set: { revokedAt: new Date() } });\n}\n\nexport async function verifyRefreshSubject(token: string) {\n  // Keep a signed wrapper if needed later; currently returns raw token presence.\n  await jwtVerify(\n    await new SignJWT({ token }).setProtectedHeader({ alg: \"HS256\" }).setExpirationTime(\"7d\").sign(refreshSecret),\n    refreshSecret,\n  );\n  return true;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;AAEA,MAAM,eAAe,IAAI,cAAc,MAAM,CAAC,yIAAG,CAAC,YAAY;AAC9D,MAAM,gBAAgB,IAAI,cAAc,MAAM,CAAC,yIAAG,CAAC,aAAa;AAQzD,eAAe,kBAAkB,OAA2B;IACjE,OAAO,IAAI,uKAAO,CAAC,SAChB,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,WAAW,GACX,iBAAiB,CAAC,GAAG,yIAAG,CAAC,qBAAqB,CAAC,CAAC,CAAC,EACjD,IAAI,CAAC;AACV;AAEO,eAAe,mBAAmB,MAAc;IACrD,MAAM,WAAW,gHAAM,CAAC,UAAU;IAClC,MAAM,YAAY,gHAAM,CAAC,UAAU,CAAC,UAAU,MAAM,CAAC,UAAU,MAAM,CAAC;IACtE,MAAM,YAAY,IAAI,KAAK,KAAK,GAAG,KAAK,yIAAG,CAAC,mBAAmB,GAAG,KAAK,KAAK,KAAK;IAEjF,MAAM,oJAAY,CAAC,MAAM,CAAC;QAAE;QAAQ;QAAW;IAAU;IACzD,OAAO;AACT;AAEO,eAAe,kBAAkB,KAAa;IACnD,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,2KAAS,EAAC,OAAO;IAC3C,OAAO;AACT;AAEO,eAAe,mBAAmB,MAAc,EAAE,aAAqB;IAC5E,MAAM,eAAe,gHAAM,CAAC,UAAU,CAAC,UAAU,MAAM,CAAC,eAAe,MAAM,CAAC;IAC9E,MAAM,WAAW,MAAM,oJAAY,CAAC,OAAO,CAAC;QAAE;QAAQ,WAAW;QAAc,WAAW;IAAK;IAC/F,IAAI,CAAC,YAAY,SAAS,SAAS,GAAG,IAAI,QAAQ;QAChD,OAAO;IACT;IAEA,SAAS,SAAS,GAAG,IAAI;IACzB,MAAM,SAAS,IAAI;IACnB,OAAO,mBAAmB;AAC5B;AAEO,eAAe,mBAAmB,KAAa;IACpD,MAAM,YAAY,gHAAM,CAAC,UAAU,CAAC,UAAU,MAAM,CAAC,OAAO,MAAM,CAAC;IACnE,MAAM,oJAAY,CAAC,SAAS,CAAC;QAAE;QAAW,WAAW;IAAK,GAAG;QAAE,MAAM;YAAE,WAAW,IAAI;QAAO;IAAE;AACjG;AAEO,eAAe,qBAAqB,KAAa;IACtD,+EAA+E;IAC/E,MAAM,IAAA,2KAAS,EACb,MAAM,IAAI,uKAAO,CAAC;QAAE;IAAM,GAAG,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAAG,iBAAiB,CAAC,MAAM,IAAI,CAAC,gBAC/F;IAEF,OAAO;AACT"}},
    {"offset": {"line": 765, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/flow/workflow-core/apps/web/src/lib/rate-limit.ts"],"sourcesContent":["const attempts = new Map<string, { count: number; firstAttemptAt: number }>();\nconst WINDOW_MS = 10 * 60 * 1000;\nconst MAX_ATTEMPTS = 8;\n\nexport function checkRateLimit(key: string) {\n  const now = Date.now();\n  const entry = attempts.get(key);\n  if (!entry) {\n    attempts.set(key, { count: 1, firstAttemptAt: now });\n    return { allowed: true };\n  }\n\n  if (now - entry.firstAttemptAt > WINDOW_MS) {\n    attempts.set(key, { count: 1, firstAttemptAt: now });\n    return { allowed: true };\n  }\n\n  entry.count += 1;\n  attempts.set(key, entry);\n  return { allowed: entry.count <= MAX_ATTEMPTS };\n}\n"],"names":[],"mappings":";;;;AAAA,MAAM,WAAW,IAAI;AACrB,MAAM,YAAY,KAAK,KAAK;AAC5B,MAAM,eAAe;AAEd,SAAS,eAAe,GAAW;IACxC,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,IAAI,CAAC,OAAO;QACV,SAAS,GAAG,CAAC,KAAK;YAAE,OAAO;YAAG,gBAAgB;QAAI;QAClD,OAAO;YAAE,SAAS;QAAK;IACzB;IAEA,IAAI,MAAM,MAAM,cAAc,GAAG,WAAW;QAC1C,SAAS,GAAG,CAAC,KAAK;YAAE,OAAO;YAAG,gBAAgB;QAAI;QAClD,OAAO;YAAE,SAAS;QAAK;IACzB;IAEA,MAAM,KAAK,IAAI;IACf,SAAS,GAAG,CAAC,KAAK;IAClB,OAAO;QAAE,SAAS,MAAM,KAAK,IAAI;IAAa;AAChD"}},
    {"offset": {"line": 803, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/flow/workflow-core/apps/web/src/lib/ip.ts"],"sourcesContent":["import { NextRequest } from \"next/server\";\n\n/**\n * Resolves client IP from request, checking common proxy and CDN headers.\n * Order: x-forwarded-for (first hop) > x-real-ip > cf-connecting-ip (Cloudflare)\n * > true-client-ip (Akamai) > x-client-ip > x-cluster-client-ip > fallback.\n */\nexport function getClientIp(req: NextRequest): string {\n  const forwardedFor = req.headers.get(\"x-forwarded-for\");\n  if (forwardedFor) {\n    const first = forwardedFor.split(\",\")[0].trim();\n    if (first) return first;\n  }\n\n  const realIp = req.headers.get(\"x-real-ip\");\n  if (realIp?.trim()) return realIp.trim();\n\n  const cfConnecting = req.headers.get(\"cf-connecting-ip\");\n  if (cfConnecting?.trim()) return cfConnecting.trim();\n\n  const trueClient = req.headers.get(\"true-client-ip\");\n  if (trueClient?.trim()) return trueClient.trim();\n\n  const clientIp = req.headers.get(\"x-client-ip\");\n  if (clientIp?.trim()) return clientIp.trim();\n\n  const clusterClient = req.headers.get(\"x-cluster-client-ip\");\n  if (clusterClient?.trim()) return clusterClient.trim();\n\n  return \"0.0.0.0\";\n}\n"],"names":[],"mappings":";;;;AAOO,SAAS,YAAY,GAAgB;IAC1C,MAAM,eAAe,IAAI,OAAO,CAAC,GAAG,CAAC;IACrC,IAAI,cAAc;QAChB,MAAM,QAAQ,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI;QAC7C,IAAI,OAAO,OAAO;IACpB;IAEA,MAAM,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC;IAC/B,IAAI,QAAQ,QAAQ,OAAO,OAAO,IAAI;IAEtC,MAAM,eAAe,IAAI,OAAO,CAAC,GAAG,CAAC;IACrC,IAAI,cAAc,QAAQ,OAAO,aAAa,IAAI;IAElD,MAAM,aAAa,IAAI,OAAO,CAAC,GAAG,CAAC;IACnC,IAAI,YAAY,QAAQ,OAAO,WAAW,IAAI;IAE9C,MAAM,WAAW,IAAI,OAAO,CAAC,GAAG,CAAC;IACjC,IAAI,UAAU,QAAQ,OAAO,SAAS,IAAI;IAE1C,MAAM,gBAAgB,IAAI,OAAO,CAAC,GAAG,CAAC;IACtC,IAAI,eAAe,QAAQ,OAAO,cAAc,IAAI;IAEpD,OAAO;AACT"}},
    {"offset": {"line": 829, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/flow/workflow-core/apps/web/app/api/auth/login/route.ts"],"sourcesContent":["import { NextResponse, NextRequest } from \"next/server\";\nimport { z } from \"zod\";\nimport { connectMongo } from \"@/src/lib/mongodb\";\nimport { ensureBootstrap } from \"@/src/lib/bootstrap\";\nimport { User, Role, LoginHistory } from \"@/src/db/models\";\nimport { verifyPassword } from \"@/src/lib/password\";\nimport { createAccessToken, createRefreshToken } from \"@/src/lib/tokens\";\nimport { checkRateLimit } from \"@/src/lib/rate-limit\";\nimport { getClientIp } from \"@/src/lib/ip\";\nimport geoip from \"geoip-lite\";\nimport { UAParser } from \"ua-parser-js\";\n\nconst bodySchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n});\n\nexport async function POST(req: NextRequest) {\n  await connectMongo();\n  await ensureBootstrap();\n\n  const parsed = bodySchema.safeParse(await req.json());\n  if (!parsed.success) {\n    return NextResponse.json({ message: \"Invalid payload.\" }, { status: 400 });\n  }\n  const rate = checkRateLimit(parsed.data.email.toLowerCase());\n  if (!rate.allowed) {\n    return NextResponse.json({ message: \"Too many attempts.\" }, { status: 429 });\n  }\n\n  const email = parsed.data.email.toLowerCase();\n  const user: any = await User.findOne({ email }).lean();\n  if (!user || !user.isActive) {\n    return NextResponse.json({ message: \"Invalid credentials.\" }, { status: 401 });\n  }\n\n  const isValid = await verifyPassword(user.passwordHash, parsed.data.password);\n  if (!isValid) {\n    return NextResponse.json({ message: \"Invalid credentials.\" }, { status: 401 });\n  }\n\n  const roles = await Role.find({ _id: { $in: user.roleIds } }).lean();\n  const roleNames = roles.map((role) => role.name);\n\n  // Collect login analytics for employees, skipping admins\n  const isEmployee = roleNames.includes(\"employee\");\n  const isAdmin = roleNames.includes(\"admin\");\n\n  if (isEmployee && !isAdmin) {\n    const publicIp = req.headers.get(\"X-Public-Ip\") || req.headers.get(\"x-public-ip\");\n    const ipAddress = publicIp || getClientIp(req) || \"Unknown\";\n\n    // System name parsing\n    const systemHeader = req.headers.get(\"X-Device-System\") || req.headers.get(\"x-device-system\");\n    let systemName = \"Unknown\";\n\n    if (systemHeader) {\n      systemName = systemHeader;\n    } else {\n      const userAgent = req.headers.get(\"user-agent\") || \"\";\n      const parser = new UAParser(userAgent);\n      const os = parser.getOS();\n      const browser = parser.getBrowser();\n      const osName = os.name ? `${os.name} ${os.version || \"\"}`.trim() : \"\";\n      const browserName = browser.name ? browser.name : \"\";\n      if (osName || browserName) {\n        systemName = [osName, browserName].filter(Boolean).join(\" - \");\n      }\n    }\n\n    let location = \"Unknown Location\";\n    if (ipAddress && ipAddress !== \"127.0.0.1\" && ipAddress !== \"::1\" && ipAddress !== \"::ffff:127.0.0.1\") {\n      try {\n        // Try to get highly accurate geographical location first\n        const geoRes = await fetch(`http://ip-api.com/json/${ipAddress}`);\n        const geoData = await geoRes.json();\n        if (geoData && geoData.status === \"success\") {\n          location = [geoData.city, geoData.regionName, geoData.country].filter(Boolean).join(\"/\");\n        } else {\n          // Fallback to local geoip db if network fetch fails\n          const geo = geoip.lookup(ipAddress);\n          if (geo) {\n            location = [geo.city, geo.region, geo.country].filter(Boolean).join(\"/\");\n          }\n        }\n      } catch (err) {\n        const geo = geoip.lookup(ipAddress);\n        if (geo) {\n          location = [geo.city, geo.region, geo.country].filter(Boolean).join(\"/\");\n        }\n      }\n\n      // If it only has mostly empty parts like \"//IN\" or identical fallbacks, sanitize it\n      if (location === \"//\" || location === \"\") {\n        location = \"Unknown Location\";\n      }\n    } else {\n      location = \"Localhost\";\n    }\n\n    const now = new Date();\n    // E.g. \"Feb 22, 2026, 12:30:15 AM\"\n    const loginTimeFormatted = now.toLocaleString(\"en-US\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"numeric\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n      hour12: true,\n    });\n\n    await LoginHistory.create({\n      userId: user._id,\n      loginTime: now,\n      loginTimeFormatted,\n      ipAddress,\n      systemName,\n      location,\n    });\n  }\n\n  const accessToken = await createAccessToken({\n    sub: user._id.toString(),\n    email: user.email,\n    roles: roleNames,\n  });\n  const refreshToken = await createRefreshToken(user._id.toString());\n\n  return NextResponse.json({\n    accessToken,\n    refreshToken,\n    user: {\n      id: user._id.toString(),\n      email: user.email,\n      roles: roleNames,\n    },\n  });\n}\n"],"names":[],"mappings":"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"}}]
}